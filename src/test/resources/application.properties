# Test configuration for Village Calendar
# Uses H2 in-memory database for testing

quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH;DB_CLOSE_DELAY=-1
quarkus.hibernate-orm.database.generation=drop-and-create

quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.log.format-sql=false
quarkus.hibernate-orm.sql-load-script=no-file

# Disable Hibernate SQL logging completely in tests
quarkus.log.category."org.hibernate.SQL".level=OFF
quarkus.log.category."org.hibernate.orm.jdbc.bind".level=OFF

# JWT configuration for tests
# Use the same keys as main application for consistent JWT signing/verification
mp.jwt.verify.publickey.location=classpath:/jwt-public-key.pem
mp.jwt.verify.issuer=village-calendar
smallrye.jwt.sign.key.location=classpath:/jwt-private-key.pem
smallrye.jwt.token.issuer=village-calendar
smallrye.jwt.token.lifespan=86400

# Stripe configuration for tests
stripe.api.key=sk_test_placeholder
stripe.publishable.key=pk_test_placeholder
stripe.webhook.secret=whsec_test_secret

# JaCoCo configuration for test coverage
quarkus.jacoco.enabled=true
quarkus.jacoco.data-file=target/jacoco.exec
